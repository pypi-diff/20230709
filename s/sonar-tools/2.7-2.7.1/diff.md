# Comparing `tmp/sonar_tools-2.7-py3-none-any.whl.zip` & `tmp/sonar_tools-2.7.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,34 +1,34 @@
-Zip file size: 204805 bytes, number of entries: 79
+Zip file size: 205034 bytes, number of entries: 79
 -rw-r--r--  2.0 unx      828 b- defN 23-May-29 07:09 sonar/__init__.py
 -rw-r--r--  2.0 unx     3208 b- defN 23-May-29 07:09 sonar/aggregations.py
 -rw-r--r--  2.0 unx    19787 b- defN 23-May-29 07:09 sonar/applications.py
 -rw-r--r--  2.0 unx     7001 b- defN 23-May-29 07:09 sonar/components.py
 -rw-r--r--  2.0 unx     2921 b- defN 23-May-29 07:09 sonar/custom_measures.py
 -rw-r--r--  2.0 unx    10862 b- defN 23-May-29 07:09 sonar/devops.py
 -rw-r--r--  2.0 unx     1493 b- defN 23-May-29 07:09 sonar/exceptions.py
 -rw-r--r--  2.0 unx    12185 b- defN 23-May-29 14:17 sonar/groups.py
 -rw-r--r--  2.0 unx     3519 b- defN 23-May-29 07:09 sonar/languages.py
--rw-r--r--  2.0 unx     9445 b- defN 23-May-29 14:17 sonar/measures.py
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jul-02 08:13 sonar/measures.py
 -rw-r--r--  2.0 unx     5959 b- defN 23-May-29 07:09 sonar/metrics.py
 -rw-r--r--  2.0 unx     2158 b- defN 23-May-29 07:09 sonar/options.py
 -rw-r--r--  2.0 unx    33075 b- defN 23-May-29 07:09 sonar/platform.py
 -rw-r--r--  2.0 unx    29376 b- defN 23-May-29 07:09 sonar/portfolios.py
 -rw-r--r--  2.0 unx    16932 b- defN 23-May-29 14:17 sonar/qualitygates.py
--rw-r--r--  2.0 unx    28150 b- defN 23-May-29 14:17 sonar/qualityprofiles.py
+-rw-r--r--  2.0 unx    28209 b- defN 23-Jul-09 08:38 sonar/qualityprofiles.py
 -rw-r--r--  2.0 unx    10898 b- defN 23-May-29 07:09 sonar/rules.py
--rw-r--r--  2.0 unx    16211 b- defN 23-May-29 07:09 sonar/settings.py
+-rw-r--r--  2.0 unx    16190 b- defN 23-Jul-02 16:25 sonar/settings.py
 -rw-r--r--  2.0 unx    18895 b- defN 23-May-29 07:09 sonar/sif.py
--rw-r--r--  2.0 unx     5984 b- defN 23-May-29 07:09 sonar/sqobject.py
+-rw-r--r--  2.0 unx     5984 b- defN 23-Jul-08 14:04 sonar/sqobject.py
 -rw-r--r--  2.0 unx     8064 b- defN 23-May-29 07:09 sonar/syncer.py
 -rw-r--r--  2.0 unx    20780 b- defN 23-May-29 07:09 sonar/tasks.py
 -rw-r--r--  2.0 unx     3486 b- defN 23-May-29 07:09 sonar/tokens.py
 -rw-r--r--  2.0 unx    17293 b- defN 23-May-29 07:09 sonar/users.py
 -rw-r--r--  2.0 unx    15398 b- defN 23-May-29 07:09 sonar/utilities.py
--rw-r--r--  2.0 unx      852 b- defN 23-May-29 07:09 sonar/version.py
+-rw-r--r--  2.0 unx      854 b- defN 23-Jul-09 08:19 sonar/version.py
 -rw-r--r--  2.0 unx     5315 b- defN 23-May-29 07:09 sonar/webhooks.py
 -rw-r--r--  2.0 unx     1034 b- defN 23-May-29 07:09 sonar/audit/__init__.py
 -rw-r--r--  2.0 unx     2851 b- defN 23-May-29 07:09 sonar/audit/config.py
 -rw-r--r--  2.0 unx     2526 b- defN 23-May-29 07:09 sonar/audit/problem.py
 -rw-r--r--  2.0 unx    19940 b- defN 22-Oct-30 18:05 sonar/audit/rules.json
 -rw-r--r--  2.0 unx     6043 b- defN 23-May-29 07:09 sonar/audit/rules.py
 -rw-r--r--  2.0 unx     1130 b- defN 23-May-29 07:09 sonar/audit/severities.py
@@ -38,44 +38,44 @@
 -rw-r--r--  2.0 unx     9708 b- defN 23-May-29 07:09 sonar/dce/app_nodes.py
 -rw-r--r--  2.0 unx     1086 b- defN 23-May-29 07:09 sonar/dce/nodes.py
 -rw-r--r--  2.0 unx     4085 b- defN 23-May-29 07:09 sonar/dce/search_nodes.py
 -rw-r--r--  2.0 unx      828 b- defN 23-May-29 07:09 sonar/findings/__init__.py
 -rw-r--r--  2.0 unx     6900 b- defN 23-May-29 07:09 sonar/findings/changelog.py
 -rw-r--r--  2.0 unx    12542 b- defN 23-May-29 07:09 sonar/findings/findings.py
 -rw-r--r--  2.0 unx    15687 b- defN 23-May-29 07:09 sonar/findings/hotspots.py
--rw-r--r--  2.0 unx    31302 b- defN 23-May-29 07:09 sonar/findings/issues.py
+-rw-r--r--  2.0 unx    31307 b- defN 23-Jul-02 08:13 sonar/findings/issues.py
 -rw-r--r--  2.0 unx      828 b- defN 23-May-29 07:09 sonar/permissions/__init__.py
 -rw-r--r--  2.0 unx     1820 b- defN 23-May-29 07:09 sonar/permissions/aggregation_permissions.py
 -rw-r--r--  2.0 unx     1021 b- defN 23-May-29 07:09 sonar/permissions/application_permissions.py
 -rw-r--r--  2.0 unx     3341 b- defN 23-May-29 07:09 sonar/permissions/global_permissions.py
 -rw-r--r--  2.0 unx     9576 b- defN 23-May-29 07:09 sonar/permissions/permission_templates.py
 -rw-r--r--  2.0 unx    11327 b- defN 23-May-29 07:09 sonar/permissions/permissions.py
 -rw-r--r--  2.0 unx     1018 b- defN 23-May-29 07:09 sonar/permissions/portfolio_permissions.py
 -rw-r--r--  2.0 unx     8193 b- defN 23-May-29 07:09 sonar/permissions/project_permissions.py
 -rw-r--r--  2.0 unx     4406 b- defN 23-May-29 07:09 sonar/permissions/quality_permissions.py
 -rw-r--r--  2.0 unx     2196 b- defN 23-May-29 07:09 sonar/permissions/qualitygate_permissions.py
 -rw-r--r--  2.0 unx     2349 b- defN 23-May-29 07:09 sonar/permissions/qualityprofile_permissions.py
 -rw-r--r--  2.0 unx     2955 b- defN 23-May-29 07:09 sonar/permissions/template_permissions.py
 -rw-r--r--  2.0 unx      828 b- defN 23-May-29 07:09 sonar/projects/__init__.py
--rw-r--r--  2.0 unx    16504 b- defN 23-May-29 07:09 sonar/projects/branches.py
--rw-r--r--  2.0 unx    53551 b- defN 23-May-29 07:09 sonar/projects/projects.py
+-rw-r--r--  2.0 unx    16830 b- defN 23-Jul-08 14:36 sonar/projects/branches.py
+-rw-r--r--  2.0 unx    53584 b- defN 23-Jul-09 08:38 sonar/projects/projects.py
 -rw-r--r--  2.0 unx     4109 b- defN 23-May-29 07:09 sonar/projects/pull_requests.py
--rwxr-xr-x  2.0 unx     2224 b- defN 23-May-29 14:26 sonar_tools-2.7.data/scripts/sonar-tools
+-rwxr-xr-x  2.0 unx     2224 b- defN 23-Jul-09 10:33 sonar_tools-2.7.1.data/scripts/sonar-tools
 -rw-r--r--  2.0 unx      828 b- defN 23-May-29 07:09 tools/__init__.py
 -rw-r--r--  2.0 unx     6700 b- defN 23-May-29 07:09 tools/audit.py
 -rw-r--r--  2.0 unx     7950 b- defN 23-May-29 07:09 tools/config.py
 -rw-r--r--  2.0 unx     2539 b- defN 23-May-29 07:09 tools/cust_measures.py
 -rw-r--r--  2.0 unx    14757 b- defN 23-May-29 07:09 tools/findings_export.py
 -rw-r--r--  2.0 unx     8891 b- defN 23-May-29 07:09 tools/findings_sync.py
--rw-r--r--  2.0 unx     8662 b- defN 23-May-29 07:09 tools/housekeeper.py
+-rw-r--r--  2.0 unx     8908 b- defN 23-Jul-08 14:36 tools/housekeeper.py
 -rw-r--r--  2.0 unx     5818 b- defN 23-May-29 07:09 tools/loc.py
 -rw-r--r--  2.0 unx     8794 b- defN 23-May-29 07:09 tools/measures_export.py
 -rw-r--r--  2.0 unx     2508 b- defN 23-May-29 07:09 tools/projects_export.py
 -rw-r--r--  2.0 unx     3750 b- defN 23-May-29 07:09 tools/projects_import.py
 -rw-r--r--  2.0 unx     6829 b- defN 23-May-29 07:09 tools/support.py
--rw-r--r--  2.0 unx     7652 b- defN 23-May-29 14:26 sonar_tools-2.7.dist-info/LICENSE
--rw-r--r--  2.0 unx    18956 b- defN 23-May-29 14:26 sonar_tools-2.7.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-29 14:26 sonar_tools-2.7.dist-info/WHEEL
--rw-r--r--  2.0 unx      581 b- defN 23-May-29 14:26 sonar_tools-2.7.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       12 b- defN 23-May-29 14:26 sonar_tools-2.7.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     6407 b- defN 23-May-29 14:26 sonar_tools-2.7.dist-info/RECORD
-79 files, 678888 bytes uncompressed, 194885 bytes compressed:  71.3%
+-rw-r--r--  2.0 unx     7652 b- defN 23-Jul-09 10:33 sonar_tools-2.7.1.dist-info/LICENSE
+-rw-r--r--  2.0 unx    19420 b- defN 23-Jul-09 10:33 sonar_tools-2.7.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-09 10:33 sonar_tools-2.7.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx      581 b- defN 23-Jul-09 10:33 sonar_tools-2.7.1.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       12 b- defN 23-Jul-09 10:33 sonar_tools-2.7.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     6421 b- defN 23-Jul-09 10:33 sonar_tools-2.7.1.dist-info/RECORD
+79 files, 680026 bytes uncompressed, 195086 bytes compressed:  71.3%
```

## zipnote {}

```diff
@@ -174,15 +174,15 @@
 
 Filename: sonar/projects/projects.py
 Comment: 
 
 Filename: sonar/projects/pull_requests.py
 Comment: 
 
-Filename: sonar_tools-2.7.data/scripts/sonar-tools
+Filename: sonar_tools-2.7.1.data/scripts/sonar-tools
 Comment: 
 
 Filename: tools/__init__.py
 Comment: 
 
 Filename: tools/audit.py
 Comment: 
@@ -213,26 +213,26 @@
 
 Filename: tools/projects_import.py
 Comment: 
 
 Filename: tools/support.py
 Comment: 
 
-Filename: sonar_tools-2.7.dist-info/LICENSE
+Filename: sonar_tools-2.7.1.dist-info/LICENSE
 Comment: 
 
-Filename: sonar_tools-2.7.dist-info/METADATA
+Filename: sonar_tools-2.7.1.dist-info/METADATA
 Comment: 
 
-Filename: sonar_tools-2.7.dist-info/WHEEL
+Filename: sonar_tools-2.7.1.dist-info/WHEEL
 Comment: 
 
-Filename: sonar_tools-2.7.dist-info/entry_points.txt
+Filename: sonar_tools-2.7.1.dist-info/entry_points.txt
 Comment: 
 
-Filename: sonar_tools-2.7.dist-info/top_level.txt
+Filename: sonar_tools-2.7.1.dist-info/top_level.txt
 Comment: 
 
-Filename: sonar_tools-2.7.dist-info/RECORD
+Filename: sonar_tools-2.7.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## sonar/measures.py

```diff
@@ -59,15 +59,15 @@
     def refresh(self):
         """Refreshes a measure by re-reading it in SonarQube
 
         :return: The new measure value
         :rtype: int or float or str
         """
         params = util.replace_keys(("project", "application", "portfolio"), "component", self.concerned_object.search_params())
-        data = json.loads(self.get(Measure.API_READ, params=params))["component"]["measures"]
+        data = json.loads(self.get(Measure.API_READ, params=params).text)["component"]["measures"]
         self.value = _search_value(data)
         return self.value
 
     def count_history(self, project_key, params=None):
         if params is None:
             params = {}
         params.update({"component": project_key, "metrics": self.metric, "ps": 1})
@@ -88,15 +88,15 @@
         measures = {}
         new_params = {} if params is None else params.copy()
         new_params.update({"metrics": self.key, "component": project_key})
         if "ps" not in new_params:
             new_params["ps"] = __MAX_PAGE_SIZE
         page, nbr_pages = 1, 1
         while page <= nbr_pages:
-            data = json.loads(self.get(Measure.API_HISTORY, params=new_params))
+            data = json.loads(self.get(Measure.API_HISTORY, params=new_params).text)
             for m in data["measures"][0]["history"]:
                 measures[m["date"]] = m["value"]
             nbr_pages = util.nbr_pages(data)
             page += 1
         return measures
```

## sonar/qualityprofiles.py

```diff
@@ -92,15 +92,15 @@
         :type name: str
         :return: The quality profile object
         :rtype: QualityProfile or None if not found
         """
         if not languages.exists(endpoint=endpoint, language=language):
             util.logger.error("Language '%s' does not exist, quality profile creation aborted")
             return None
-        util.logger.debug("Reading quality profile '%s'  of language '%s'", name, language)
+        util.logger.debug("Reading quality profile '%s' of language '%s'", name, language)
         key = get_id(name, language)
         if key in _OBJECTS:
             return _OBJECTS[key]
         data = util.search_by_name(endpoint, name, _SEARCH_API, _SEARCH_FIELD, extra_params={"language": language})
         return cls(key=data["key"], endpoint=endpoint, data=data)
 
     @classmethod
@@ -332,25 +332,26 @@
         return diff_rules
 
     def projects(self):
         """Returns the list of projects keys using this quality profile
         :return: dict result of the diff ("inLeft", "modified")
         :rtype: List[project_key]
         """
+        # TODO: Make this function thread safe
         if self._projects is not None:
             # Assume nobody changed QP during execution
             return self._projects
         self._projects = []
         params = {"key": self.key, "ps": 500}
         page = 1
         more = True
         while more:
             params["p"] = page
             data = json.loads(self.get("qualityprofiles/projects", params=params).text)
-            util.logger.debug("Got QP data = %s", str(data))
+            util.logger.debug("Got QP %s data = %s", self.key, str(data))
             self._projects += [p["key"] for p in data["results"]]
             page += 1
             if self.endpoint.version() >= (10, 0, 0):
                 nb_pages = (data["paging"]["total"] + 500 - 1) // 500
                 more = nb_pages >= page
             else:
                 more = data["more"]
```

## sonar/settings.py

```diff
@@ -402,15 +402,15 @@
     return endpoint.post("settings/reset", params={"key": setting_key, "component": project_key})
 
 
 def get_component_params(component, name="component"):
     if not component:
         return {}
     elif type(component).__name__ == "Branch":
-        return {name: component.project.key, "branch": component.key} if component else {}
+        return {name: component.project.key, "branch": component.key}
     else:
         return {name: component.key}
 
 
 def is_valid(setting_key, endpoint):
     if len(VALID_SETTINGS) == 0:
         get_bulk(endpoint=endpoint, include_not_set=True)
```

## sonar/version.py

```diff
@@ -13,8 +13,8 @@
 # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 # Lesser General Public License for more details.
 #
 # You should have received a copy of the GNU Lesser General Public License
 # along with this program; if not, write to the Free Software Foundation,
 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 #
-PACKAGE_VERSION = "2.7"
+PACKAGE_VERSION = "2.7.1"
```

## sonar/findings/issues.py

```diff
@@ -215,15 +215,15 @@
 
     def changelog(self):
         """
         :return: The issue changelog
         :rtype: dict{"<date>_<sequence_nbr>": <event>}
         """
         if self._changelog is None:
-            data = json.loads(self.get("issues/changelog", {"issue": self.key, "format": "json"}))
+            data = json.loads(self.get("issues/changelog", {"issue": self.key, "format": "json"}).text)
             util.json_dump_debug(data["changelog"], f"{str(self)} Changelog = ")
             self._changelog = {}
             seq = 1
             for l in data["changelog"]:
                 d = changelog.Changelog(l)
                 if d.is_technical_change():
                     # Skip automatic changelog events generated by SonarSource itself
```

## sonar/projects/branches.py

```diff
@@ -184,15 +184,20 @@
     def delete(self):
         """Deletes a branch
 
         :raises ObjectNotFound: Branch not found for deletion
         :return: Whether the deletion was successful
         :rtype: bool
         """
-        return sq.delete_object(self, APIS["delete"], {"branch": self.name, "project": self.concerned_object.key}, _OBJECTS)
+        try:
+            return sq.delete_object(self, APIS["delete"], {"branch": self.name, "project": self.concerned_object.key}, _OBJECTS)
+        except HTTPError as e:
+            if e.response.status_code == HTTPStatus.BAD_REQUEST:
+                util.logger.warning("Can't delete %s, it's the main branch", str(self))
+            return False
 
     def new_code(self):
         """
         :return: The branch new code period definition
         :rtype: str
         """
         if self._new_code is None:
@@ -351,15 +356,17 @@
     def __audit_last_analysis(self, audit_settings):
         age = util.age(self.last_analysis())
         if self.is_main() or age is None:
             # Main branch (not purgeable) or branch not analyzed yet
             return []
         max_age = audit_settings["audit.projects.branches.maxLastAnalysisAge"]
         problems = []
-        if self.is_kept_when_inactive():
+        if self.is_main():
+            util.logger.debug("%s is main (not purgeable)", str(self))
+        elif self.is_kept_when_inactive():
             util.logger.debug("%s is kept when inactive (not purgeable)", str(self))
         elif age > max_age:
             rule = rules.get_rule(rules.RuleId.BRANCH_LAST_ANALYSIS)
             msg = rule.msg.format(str(self), age)
             problems.append(problem.Problem(rule.type, rule.severity, msg, concerned_object=self))
         else:
             util.logger.debug("%s age is %d days", str(self), age)
```

## sonar/projects/projects.py

```diff
@@ -203,15 +203,15 @@
         self._branches_last_analysis = self._last_analysis
         if self.endpoint.version() >= (9, 2, 0):
             # Starting from 9.2 project last analysis date takes into account branches and PR
             return self._branches_last_analysis
 
         util.logger.debug("Branches = %s", str(self.branches()))
         util.logger.debug("PR = %s", str(self.pull_requests()))
-        for b in list(self.branches().values()) + self.pull_requests():
+        for b in self.branches() + self.pull_requests():
             if b.last_analysis() is None:
                 continue
             b_ana_date = b.last_analysis()
             if self._branches_last_analysis is None or b_ana_date > self._branches_last_analysis:
                 self._branches_last_analysis = b_ana_date
         return self._branches_last_analysis
 
@@ -246,15 +246,15 @@
         :rtype: dict{<branchName>: <Branch>}
         """
         if not self._branches:
             # Caching
             try:
                 self._branches = branches.get_list(self)
             except exceptions.UnsupportedOperation:
-                self._branches = {}
+                self._branches = []
         return self._branches
 
     def main_branch(self):
         """
         :return: Main branch of the project
         :rtype: Branch
         """
@@ -1050,15 +1050,15 @@
     :param params: list of parameters to filter projects to search
     :type params: dict
     :return: Count of projects
     :rtype: int
     """
     new_params = {} if params is None else params.copy()
     new_params.update({"ps": 1, "p": 1})
-    data = json.loads(endpoint.get(_SEARCH_API, params=params))
+    data = json.loads(endpoint.get(_SEARCH_API, params=params).text)
     return data["paging"]["total"]
 
 
 def search(endpoint, params=None):
     """Searches projects in SonarQube
 
     :param endpoint: Reference to the SonarQube platform
@@ -1171,15 +1171,17 @@
     :param full: Whether to export all settings including those useless for re-import, defaults to False
     :type full: bool, optional
     :param threads: Number of parallel threads for export, defaults to 8
     :type threads: int, optional
     :return: list of projects
     :rtype: dict{key: Project}
     """
-    qualityprofiles.get_list(endpoint)
+    for qp in qualityprofiles.get_list(endpoint).values():
+        qp.projects()
+
     q = Queue(maxsize=0)
     for p in get_list(endpoint=endpoint, key_list=key_list).values():
         q.put(p)
     project_settings = {}
     for i in range(threads):
         util.logger.debug("Starting project export thread %d", i)
         worker = Thread(target=__export_thread, args=(q, project_settings, full))
```

## tools/housekeeper.py

```diff
@@ -26,14 +26,15 @@
     - Tokens not renewed since a given number of days
 
 """
 import sys
 from sonar import platform, tokens, users, groups, version, options
 from sonar.projects import projects, branches, pull_requests
 import sonar.utilities as util
+import sonar.exceptions as ex
 from sonar.audit import config, problem
 
 
 def get_project_problems(max_days_proj, max_days_branch, max_days_pr, nb_threads, endpoint):
     problems = []
     if max_days_proj < 90:
         util.logger.error("As a safety measure, can't delete projects more recent than 90 days")
@@ -161,35 +162,39 @@
     deleted_branch_count = 0
     deleted_pr_count = 0
     deleted_loc = 0
     for p in problems:
         obj = p.concerned_object
         if obj is None:
             continue  # BUG
-        if isinstance(obj, projects.Project):
-            loc = int(obj.get_measure("ncloc", fallback="0"))
-            if mode == "delete":
-                util.logger.info("Deleting %s, %d LoC", str(obj), loc)
-            else:
-                util.logger.info("%s, %d LoC should be deleted", str(obj), loc)
-            if mode != "delete" or obj.delete():
-                deleted_projects[obj.key] = obj
-                deleted_loc += loc
-        if isinstance(obj, branches.Branch):
-            if obj.concerned_object.key in deleted_projects:
-                util.logger.info("%s deleted, so no need to delete %s", str(obj.concerned_object), str(obj))
-            elif mode != "delete" or obj.delete():
-                deleted_branch_count += 1
-        if isinstance(obj, pull_requests.PullRequest):
-            if obj.project.key in deleted_projects:
-                util.logger.info("%s deleted, so no need to delete %s", str(obj.project), str(obj))
-            elif mode != "delete" or obj.delete():
-                deleted_pr_count += 1
-        if isinstance(obj, tokens.UserToken) and (mode != "delete" or obj.revoke()):
-            revoked_token_count += 1
+        try:
+            if isinstance(obj, projects.Project):
+                loc = int(obj.get_measure("ncloc", fallback="0"))
+                if mode == "delete":
+                    util.logger.info("Deleting %s, %d LoC", str(obj), loc)
+                else:
+                    util.logger.info("%s, %d LoC should be deleted", str(obj), loc)
+                if mode != "delete" or obj.delete():
+                    deleted_projects[obj.key] = obj
+                    deleted_loc += loc
+            if isinstance(obj, branches.Branch):
+                if obj.concerned_object.key in deleted_projects:
+                    util.logger.info("%s deleted, so no need to delete %s", str(obj.concerned_object), str(obj))
+                elif mode != "delete" or obj.delete():
+                    deleted_branch_count += 1
+            if isinstance(obj, pull_requests.PullRequest):
+                if obj.project.key in deleted_projects:
+                    util.logger.info("%s deleted, so no need to delete %s", str(obj.project), str(obj))
+                elif mode != "delete" or obj.delete():
+                    deleted_pr_count += 1
+            if isinstance(obj, tokens.UserToken) and (mode != "delete" or obj.revoke()):
+                revoked_token_count += 1
+        except ex.ObjectNotFound:
+            util.logger.warning("%s does not exist, deletion skipped...", str(obj))
+
     return (
         len(deleted_projects),
         deleted_loc,
         deleted_branch_count,
         deleted_pr_count,
         revoked_token_count,
     )
```

## Comparing `sonar_tools-2.7.data/scripts/sonar-tools` & `sonar_tools-2.7.1.data/scripts/sonar-tools`

 * *Files identical despite different names*

## Comparing `sonar_tools-2.7.dist-info/LICENSE` & `sonar_tools-2.7.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `sonar_tools-2.7.dist-info/METADATA` & `sonar_tools-2.7.1.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: sonar-tools
-Version: 2.7
+Version: 2.7.1
 Summary: A collection of utility scripts for SonarQube
 Home-page: https://github.com/okorach/sonar-tools
 Author: Olivier Korach
 Author-email: olivier.korach@gmail.com
 License: UNKNOWN
 Project-URL: Bug Tracker, https://github.com/okorach/sonar-tools/issues
 Project-URL: Documentation, https://github.com/okorach/sonar-tools/README.md
@@ -46,15 +46,16 @@
 - [sonar-measures-export](#sonar-measures-export): Exports measures/metrics of one, several or all projects of the instance in CSV
 - [sonar-findings-export](#sonar-findings-export) (Also available as **sonar-issues-export** (deprecated) for backward compatibility): Exports issues and hotspots (potentially filtered) from the instance in CSV
 - [sonar-issues-sync](#sonar-issues-sync): Synchronizes issue changelog between branches, projects or even SonarQube instances
 - [sonar-projects-export](#sonar-projects-export): Exports all projects from a SonarQube instance (EE and higher)
 - [sonar-projects-import](#sonar-projects-import): Imports a list of projects into a SonarQube instance (EE and higher)
 - [sonar-config](#sonar-config): Exports or Imports a SonarQube platform configuration to/from configuration as code file (JSON file).
 
-:information_source: Although they are likely to work with many versions, the offered tools are **only tested against SonarQube LTS (Long Term Support, currently 8.9.x) and LATEST versions**
+:information_source: Although they are likely to work with many versions, the offered tools are **only tested against SonarQube LTS (Long Term Support, currently 9.9.x) and LATEST versions**
+:warning: **sonar-tools** 2.7 or higher is required for compatibility with SonarQube 10
 
 # What's New - Release notes
 - [What's new](https://github.com/okorach/sonar-tools/blob/master/doc/what-is-new.md)
 - [Release notes](https://github.com/okorach/sonar-tools/releases)
 
 # Requirements and Installation
 - `sonar-tools` requires python 3.6 or higher
@@ -109,14 +110,16 @@
 Branches marked as "keep when inactive" are excluded from housekeeping
 - `-R <days>`: Will search for pull requests not analyzed since more than `<days>` days
 - `-T <days>`: Will search for tokens created since more than `<days>` days
 - `--mode delete`: If not specified, `sonar-housekeeper` will only perform a dry run and list projects
 branches, pull requests and tokens that would be deleted.
 If `--mode delete` is specified objects are actually deleted
 
+:warning: **sonar-tools** 2.7 or higher is required for `sonar-housekeeper` compatibility with SonarQube 10
+
 ## Required Permissions
 
 To be able to delete anything, the token provided to `sonar-housekeeper` should have:
 - The global `Administer System` permission to delete tokens
 - Plus `Browse` and `Administer` permission on all projects to delete (or with branches or PR to delete)
 
 ### :information_source: Limitations
@@ -229,14 +232,15 @@
 
 Basic Usage: `sonar-projects-export [--exportTimeout <timeout>] >exported_projects.csv`  
 - `--exportTimeout`: Defines timeout to export a single project in seconds,
                      by default 180 s (large projects can take time to export)
 - `-f`: Define file for output (default stdout). File extension is used to deduct expected format (json if file.json, csv otherwise)
 
 :information_source: All zip files are generated in the SonarQube instance standard location (under `data/governance/project_dumps/export`). On a DCE, the export may be distributed over all the Application Nodes
+:warning: **sonar-tools** 2.7 or higher is required for compatibility with SonarQube 10
 
 The CSV file generated is to be used by the `sonar-projects-import` tool
 
 ## Required Permissions
 
 `sonar-projects-export` requires `Administer project` permission on all projects to be exported
 
@@ -248,14 +252,15 @@
 ```
 
 # <a name="sonar-projects-import"></a>sonar-projects-import
 
 Imports a list of projects previously exported with `sonar-projects-export`.  
 :warning: This requires a SonarQube Enterprise or Data Center Edition.  
 It takes as input a CSV file produced by `sonar-projects-export`
+:warning: **sonar-tools** 2.7 or higher is required for compatibility with SonarQube 10
 
 Basic Usage: `sonar-projects-import -f <file.csv>`  
 - `-f`: Define input file for project import, result of a `sonar-projects-export` command
 
 :information_source: All exported zip files must be first copied to the right location on the target SonarQube instance for the import to be successful (In `data/governance/project_dumps/import`)
 
 ## Required Permissions
@@ -280,14 +285,16 @@
 - `-f`: Define the output file, if not specified `stdout` is used
 - `-e` or `--export`: Specify the export operation
 - `-w` or `--what`: Specify what to export (everything by default)
 - `k "<key1>,<key2>,...,<keyn>"`: Will only import/export projects, apps or portfolios with matching keys
 - `--fullExport`: Will also export object properties that are not used for an import by may be of interest anyway
 See [sonar-config complete doc](https://github.com/okorach/sonar-tools/blob/master/doc/sonar-config.md)
 
+:warning: **sonar-tools** 2.7 or higher is required for compatibility with SonarQube 10
+
 ## Required Permissions
 
 To export and import configuration, `sonar-config` needs elevated permissions.
 See [sonar-config complete documentation](https://github.com/okorach/sonar-tools/blob/master/doc/sonar-config.md) for details
 
 ## Examples
 ```
```

## Comparing `sonar_tools-2.7.dist-info/entry_points.txt` & `sonar_tools-2.7.1.dist-info/entry_points.txt`

 * *Files identical despite different names*

## Comparing `sonar_tools-2.7.dist-info/RECORD` & `sonar_tools-2.7.1.dist-info/RECORD`

 * *Files 6% similar despite different names*

```diff
@@ -3,31 +3,31 @@
 sonar/applications.py,sha256=ANxmBaASdUh6d5eCvU64Sduv0nyqi_tHfvh4le8CQ0o,19787
 sonar/components.py,sha256=fP1OJeTPgJZy2pAy76MkN6LSje2ov-Wiu_lJWQwxWiw,7001
 sonar/custom_measures.py,sha256=s0DpOIXgSPwnQpjPk3kWGuZ9_mnJ6W_zfGI7sgt-Zgs,2921
 sonar/devops.py,sha256=YHL8nCndyB_1FX7CYVWC-WAaPdKoB_TaCZ2GV6S3qZo,10862
 sonar/exceptions.py,sha256=o2la24pzfNSyP89tMCxufQCS7Q8y-24-bujIwVUlm_M,1493
 sonar/groups.py,sha256=rJbb5EpWfaoSFR6p1w9YXjtijHI1H8Pp2PXYmrX5gfA,12185
 sonar/languages.py,sha256=U34JNrmE6FwXr_KrRqroWVcah_NX7HyFDMLJLCgvt7M,3519
-sonar/measures.py,sha256=6waRRnqHlGNyuW-w8FcQDBC7pwRzbBZh8KNeMqeNdw0,9445
+sonar/measures.py,sha256=nvJmt5R6h95OrJg_MO2_jE1Jr0Z6OtqCCzgcZkWFhik,9455
 sonar/metrics.py,sha256=RM0EGp4okP542A6j5XbDeNZF9JWRlcrezPCqDRSqY10,5959
 sonar/options.py,sha256=sOR-J1eFBKi2Jx8MHK6fPh3_e6OWBz2SEA0auJ2J5ck,2158
 sonar/platform.py,sha256=8oRkPPqgdL7vQYlD6TXxEcA1qatlGEan2M4zLbYZixE,33075
 sonar/portfolios.py,sha256=3KfvMFbBLR04A3ee4LNQw5rMGz1ApJmt8JCsZXrx910,29376
 sonar/qualitygates.py,sha256=oaOOpuIF_IdhrWd8li6D-kGtXh_71bSDvq7YG6OqB9E,16932
-sonar/qualityprofiles.py,sha256=RuwA07uvZu9hrgT96OWOQqObR-rT-LiAD1cf9CFoK6s,28150
+sonar/qualityprofiles.py,sha256=HltrekhvPZt7aE0QXtQLgFUuJLBAPU2zpNGX0q3xMH0,28209
 sonar/rules.py,sha256=LK8Rm0OqDAmselnCBk4n37f-ZfLAN0OgYp9B06l8jus,10898
-sonar/settings.py,sha256=er2guQDS2torDvrhtOJDcfaYPmZI1g3ld6JKaVWXf2A,16211
+sonar/settings.py,sha256=-5lWAwZE_MwwWu1Jlsvi3AE7nmHAvDE4ZWqjwzlQcB0,16190
 sonar/sif.py,sha256=Qwz-9hu9i9VtyrQ7UlCmBSsJNRHCvC2lIZJg2ga233A,18895
 sonar/sqobject.py,sha256=AjEMdaIOwFQczueLpWyA7SukSLJR6OiKLx5msJzXNXI,5984
 sonar/syncer.py,sha256=hYOD1pq2bOqt60C0hNPAGDWd9xXzSGULtM2obqRzweo,8064
 sonar/tasks.py,sha256=6L4Bjb-aC0RxcEJZjqjkOOlZP09lVQynFYXciS75UlU,20780
 sonar/tokens.py,sha256=vmxrEZtEM4lmX6WUhCm_3TKAsqenv57hncrT4-3OlzQ,3486
 sonar/users.py,sha256=yJ5UEyISCUihT8iPoC3YAX2uyn7gSY7h5CZgTpuhArk,17293
 sonar/utilities.py,sha256=pJ140fSkHN0GRBC6gvAPgcSUse5CjPtZkN9N6DTQq-k,15398
-sonar/version.py,sha256=LHRbDD4OoVUlTuL68J4C85sTinNvFrT8rJ1ItcEA1dM,852
+sonar/version.py,sha256=0kX5R2ZBL0s2eoEQXmOPdxpBo3UAK4wp1QQugASJsBs,854
 sonar/webhooks.py,sha256=KVAvsvbtK8Dix6b9W-ghqRPnzMPmgMz84v3jrb5C5c8,5315
 sonar/audit/__init__.py,sha256=661kXMxdUJCCBRyXzAxxXHjxDX9lFoG1QPt-ZdtC8yQ,1034
 sonar/audit/config.py,sha256=A48t_TDFbyjFbY84d9EwKO1_mlSbouEf_d4VRazP6AE,2851
 sonar/audit/problem.py,sha256=3_0HIaOTzwzJ--FYYKbqM4kcEuIFLRSVirOZQ3Sjuq4,2526
 sonar/audit/rules.json,sha256=clx2U9Ir7CtBbzfClLZAcidNTq81DgB9IahRzgKl5r0,19940
 sonar/audit/rules.py,sha256=wUk4fTqHQ8hlF1Azrb9Qk_EFT7PaRJeT-EKKnEyDia0,6043
 sonar/audit/severities.py,sha256=IiFuBifnQteb1V0uIHg086EkKKgHiIn4ZDJFRtt5KNY,1130
@@ -37,43 +37,43 @@
 sonar/dce/app_nodes.py,sha256=iefhOlli44MOjtALS1SRSprhFjTbiJIt-KM8GrPQQQk,9708
 sonar/dce/nodes.py,sha256=CJ529y41pCZIwyR2XajmTgmHFMgtvzsuj5Kx6H4SGeo,1086
 sonar/dce/search_nodes.py,sha256=hI1O7USvRxCfMf-HBNWPTPP-XkgCpwNmQ1GftsGkZ5k,4085
 sonar/findings/__init__.py,sha256=GwVnjOWYQgDaYymoId3qvuplKZlKl7tbKQf2daZfvJQ,828
 sonar/findings/changelog.py,sha256=0C6sxs3hhvHVZqYe2JghufpKAuRr1HoNuLLCBcYIQlc,6900
 sonar/findings/findings.py,sha256=SGZ8Y0fZsUs8Cm9KdhuZLjMadgkpMDwVQxD6BdxdfuU,12542
 sonar/findings/hotspots.py,sha256=iXyeW_pdIiTad0Oe5DE335CpFhfZbG6dhpM1XbtEJtk,15687
-sonar/findings/issues.py,sha256=kU7M2nrdSaHFuLXdg1Y5NHQ5-HuxPHWMVwdt8IagLY4,31302
+sonar/findings/issues.py,sha256=yJxQzgaCwhCxO0eSzXShVhJan1Uwxl8G3udk6eLrcUI,31307
 sonar/permissions/__init__.py,sha256=GwVnjOWYQgDaYymoId3qvuplKZlKl7tbKQf2daZfvJQ,828
 sonar/permissions/aggregation_permissions.py,sha256=HQ1v_QtudsbOf2a4okZl1OSHEFHetFg62KbPkvnneZs,1820
 sonar/permissions/application_permissions.py,sha256=tYTl9GLXf9uvpfWlgaOU_CFtNS05az-dWHr4EpiTTG0,1021
 sonar/permissions/global_permissions.py,sha256=ifCFS5ExfYcBiqUxtF2X38tTM30GDyyqbFQHgCUD3kA,3341
 sonar/permissions/permission_templates.py,sha256=nmKjVyBwNteWVlu3EZOhUbwkRAs2YX85MHQ7NmR5JtQ,9576
 sonar/permissions/permissions.py,sha256=RwqftdNqOHf0SGFB2NkEMbnIatH6iAUaD4wwAYZaxXw,11327
 sonar/permissions/portfolio_permissions.py,sha256=JNqhWTjSDiCJ0Ndyckx_6nPUCL1v3vrkoJhndQIJXvQ,1018
 sonar/permissions/project_permissions.py,sha256=No2fVk42t2pzPh8E_fdyHzprdNSGL4AiedQJFEJY3bc,8193
 sonar/permissions/quality_permissions.py,sha256=7lgibprH-SuBes7K6DNJaSZXmyrysKoeUoWeZARevz0,4406
 sonar/permissions/qualitygate_permissions.py,sha256=YVd-VXabtv-aKCpkRZdgoBRPe7cbf6kOf1J69xqkVXU,2196
 sonar/permissions/qualityprofile_permissions.py,sha256=842KkU0P2iLI4c4LE1pK4uGV8tg-hF_ky7juv3FP1fE,2349
 sonar/permissions/template_permissions.py,sha256=0c5ewNIb53g9VgMyIsAV7MX3kJK8lpWn0SO0Vp6E9zE,2955
 sonar/projects/__init__.py,sha256=GwVnjOWYQgDaYymoId3qvuplKZlKl7tbKQf2daZfvJQ,828
-sonar/projects/branches.py,sha256=VBp-YsZ0Kgfu4_0yqEk5NkbzJyDlnCuZzWrFdi97dCY,16504
-sonar/projects/projects.py,sha256=pEzuBo5ZlJBsXtiuiY8E40mmyWHAx21c7GZ4wdyL2vM,53551
+sonar/projects/branches.py,sha256=8EFAJ36vFlw4V_3pHpikSSbjtS2wC1BlglmZIkRcgCI,16830
+sonar/projects/projects.py,sha256=p9NtB4X_d65gL6AjZSMKhUdi4FHxJmGRJaF7cnwufls,53584
 sonar/projects/pull_requests.py,sha256=KzlF6DKefshCB7yrX594M6euLuM5LAOVBQLU7hdnhWI,4109
-sonar_tools-2.7.data/scripts/sonar-tools,sha256=ws594CY8R9tzJdTSRtONz6bbV8-QvtD7_eL0OOHXNRo,2224
+sonar_tools-2.7.1.data/scripts/sonar-tools,sha256=ws594CY8R9tzJdTSRtONz6bbV8-QvtD7_eL0OOHXNRo,2224
 tools/__init__.py,sha256=GwVnjOWYQgDaYymoId3qvuplKZlKl7tbKQf2daZfvJQ,828
 tools/audit.py,sha256=IYaNHhNZ-Td-Nw2zDvjoeGqNtz52DqoNvOD0u6OxlIM,6700
 tools/config.py,sha256=djhvXDTS2NM5_ZTRXt6XK9coIcD0G13V6vKU_1064rQ,7950
 tools/cust_measures.py,sha256=AZ6JuHE0b1hVccGHIWlP0eANsHu_U5laRpVBCtJ1Fy0,2539
 tools/findings_export.py,sha256=Uk85GdmIE8-7ReRT5fcQQBKt1I8_b5kL1o7zpLVxYkg,14757
 tools/findings_sync.py,sha256=NWcYmpQDaKCCL-vFdOB4HM9k4SrwIip71wlsfC3Ggfo,8891
-tools/housekeeper.py,sha256=BjyHK8rsLAKZlbURIvt16SOvRifHcbiuhTLo7mjdqeY,8662
+tools/housekeeper.py,sha256=6iobE_MN6YN_XxUTG2yAYxJ0tiqu3Qncn6upXBfLPMI,8908
 tools/loc.py,sha256=za_V1dLgHpEx0UxC9TThhD4ukCPdOYN6aj2r39VI1OY,5818
 tools/measures_export.py,sha256=pqrWFjmhqvQXieRcDA-IldodT1wx4lO0MtLFoEBbGtw,8794
 tools/projects_export.py,sha256=M5QJ3si8wN_t_yN_gnn6723O8BWQjdm0Anbm_EOReRY,2508
 tools/projects_import.py,sha256=DIpv44By6_SHdM1Wn09UZXlowvy_m6oTnrj9EJAcEP8,3750
 tools/support.py,sha256=Zn_7ERQpoug0NaU1fdC9ClRtVJ42ni3PFik7T9ybPOU,6829
-sonar_tools-2.7.dist-info/LICENSE,sha256=46mU2C5kSwOnkqkw9XQAJlhBL2JAf1_uCD8lVcXyMRg,7652
-sonar_tools-2.7.dist-info/METADATA,sha256=i0E2NBNlGLFWep_JK-EKsyUkVs9HKvuRK0PviwsD0-I,18956
-sonar_tools-2.7.dist-info/WHEEL,sha256=g4nMs7d-Xl9-xC9XovUrsDHGXt-FT0E17Yqo92DEfvY,92
-sonar_tools-2.7.dist-info/entry_points.txt,sha256=eD6UnaXtoIsqWxRv8W80gjMSjr7SQHlF9Xm7MHe3ClY,581
-sonar_tools-2.7.dist-info/top_level.txt,sha256=4UurrhJYnkA9Gtw-URkzRpfPjRIOIqSCQFJGrwE8Nvo,12
-sonar_tools-2.7.dist-info/RECORD,,
+sonar_tools-2.7.1.dist-info/LICENSE,sha256=46mU2C5kSwOnkqkw9XQAJlhBL2JAf1_uCD8lVcXyMRg,7652
+sonar_tools-2.7.1.dist-info/METADATA,sha256=MCjrWFv2JsCgOulDKqBS3Wzy3nIL0bEP3wbX9Z6FT1s,19420
+sonar_tools-2.7.1.dist-info/WHEEL,sha256=g4nMs7d-Xl9-xC9XovUrsDHGXt-FT0E17Yqo92DEfvY,92
+sonar_tools-2.7.1.dist-info/entry_points.txt,sha256=eD6UnaXtoIsqWxRv8W80gjMSjr7SQHlF9Xm7MHe3ClY,581
+sonar_tools-2.7.1.dist-info/top_level.txt,sha256=4UurrhJYnkA9Gtw-URkzRpfPjRIOIqSCQFJGrwE8Nvo,12
+sonar_tools-2.7.1.dist-info/RECORD,,
```

